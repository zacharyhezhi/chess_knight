{"ast":null,"code":"var _jsxFileName = \"/Users/zachary/work/\\u6C42\\u804C/chess_knight/frontend/src/common/Game.js\";\nimport React from 'react';\nimport Board from './Board';\nimport Chess from '../class/Chess';\nimport Node from '../class/Node';\n\nclass Game extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.startGame = () => {\n      const knight = this.getRandomPosition();\n      const destination = this.getRandomPosition();\n      this.setState({\n        knight,\n        destination\n      });\n    };\n\n    this.getRandomPosition = () => {\n      return [this.getRandomInt(), this.getRandomInt()];\n    };\n\n    this.getRandomInt = () => {\n      const max = 8;\n      return Math.floor(Math.random() * Math.floor(max));\n    };\n\n    this.move = (x, y) => {\n      console.log(x, y);\n      this.setState({\n        knight: [x, y]\n      });\n    };\n\n    this.help = () => {\n      //find steps to destination and return all steps\n      const _this$state = this.state,\n            knight = _this$state.knight,\n            destination = _this$state.destination;\n      const chess = new Chess();\n      const knightNode = new Node(knight[0], knight[1]);\n      const destNode = new Node(destination[0], destination[1]);\n      const steps = chess.calcSteps(knightNode, destNode);\n      console.log(steps); //steps is an array, e.g [{0,1}, {1,2}]\n      // map out all elements in steps in board   \n      // let steps = [{x: 0, y: 1}, {x: 1,y: 2}, {x: 2, y: 3}];\n\n      let count = 0;\n\n      function myTimer() {\n        //call move function to next step\n        console.log(\"move to step \".concat(count), steps[count], steps[count].x);\n        knightNode[0] = steps[count].x;\n        knightNode[1] = steps[count].y;\n        count++;\n\n        if (count >= steps.length) {\n          clearInterval(myInterval);\n        }\n      }\n\n      var myInterval = setInterval(myTimer, 1000);\n    };\n\n    this.state = {\n      knight: [0, 0],\n      destination: [7, 7]\n    };\n  }\n\n  render() {\n    const _this$state2 = this.state,\n          knight = _this$state2.knight,\n          destination = _this$state2.destination;\n    return React.createElement(React.Fragment, null, React.createElement(Board, {\n      knight: knight,\n      destination: destination,\n      move: (x, y) => this.move(x, y),\n      tabIndex: \"0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }), React.createElement(\"section\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"primary\",\n      onClick: this.startGame // onKeyPress={/** TODO add onKeyPress */}\n      ,\n      \"arial-label\": \"start game button\",\n      tabIndex: \"1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, \"start game\"), React.createElement(\"button\", {\n      className: \"secondary\",\n      onClick: this.help,\n      \"arial-label\": \"help button\",\n      tabIndex: \"2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \"help\")));\n  }\n\n}\n\nexport default Game;","map":{"version":3,"sources":["/Users/zachary/work/求职/chess_knight/frontend/src/common/Game.js"],"names":["React","Board","Chess","Node","Game","Component","constructor","props","startGame","knight","getRandomPosition","destination","setState","getRandomInt","max","Math","floor","random","move","x","y","console","log","help","state","chess","knightNode","destNode","steps","calcSteps","count","myTimer","length","clearInterval","myInterval","setInterval","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Board from './Board';\nimport Chess from '../class/Chess';\nimport Node from '../class/Node';\n\nclass Game extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            knight: [0,0],\n            destination: [7,7]\n        }\n    }\n\n    startGame = () => {\n        const knight = this.getRandomPosition(); \n        const destination = this.getRandomPosition();\n        this.setState({\n            knight,\n            destination\n        });\n    }\n\n    getRandomPosition = () => {\n        return [this.getRandomInt(), this.getRandomInt()];\n    }\n\n    getRandomInt = () => {\n        const max = 8;\n        return Math.floor(Math.random() * Math.floor(max));\n    }\n\n    move = (x,y) => {\n        console.log(x,y);\n        this.setState({\n\n            knight:[x, y]\n        })\n    }\n\n    help = () => {\n        //find steps to destination and return all steps\n        const { knight, destination} = this.state;\n        const chess = new Chess();\n        const knightNode = new Node(knight[0], knight[1]);\n        const destNode = new Node(destination[0], destination[1]);\n        const steps = chess.calcSteps(knightNode, destNode);\n        console.log(steps);\n        //steps is an array, e.g [{0,1}, {1,2}]\n        // map out all elements in steps in board   \n        // let steps = [{x: 0, y: 1}, {x: 1,y: 2}, {x: 2, y: 3}];\n        let count = 0;\n        function myTimer() {\n        //call move function to next step\n            console.log(`move to step ${count}`, steps[count],steps[count].x);\n            knightNode[0] = steps[count].x;\n            knightNode[1] = steps[count].y; \n            count++;\n            if(count >= steps.length) {\n            clearInterval(myInterval);\n            }\n        }\n\n        var myInterval = setInterval(myTimer, 1000);\n\n    }\n\n    render() {\n        const { knight, destination} = this.state;\n        return (\n            <>\n                <Board \n                    knight={knight}\n                    destination={destination} \n                    move={(x,y) => this.move(x,y)}\n                    tabIndex=\"0\"/>\n                <section>\n                    <button \n                        className=\"primary\"\n                        onClick={this.startGame}\n                        // onKeyPress={/** TODO add onKeyPress */}\n                        arial-label=\"start game button\"\n                        tabIndex=\"1\"\n                        >\n                        start game\n                    </button>\n                    <button \n                        className=\"secondary\"\n                        onClick={this.help}\n                        arial-label=\"help button\"\n                        tabIndex=\"2\">\n                        help\n                    </button>\n                </section>\n            </>\n        )\n    }\n}\n\n\n\nexport default Game;"]},"metadata":{},"sourceType":"module"}